{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/Usuario/Documents/tp_final/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/Usuario/Documents/tp_final/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nexport default {\n  data: function data() {\n    return {\n      userId: localStorage.getItem('userId'),\n      transactions: [],\n      loading: true,\n      headers: {\n        'x-apikey': '60eb09146661365596af552f'\n      }\n    };\n  },\n  created: function created() {\n    if (!this.userId) {\n      this.$router.push({\n        name: 'UserLogin'\n      });\n    } else {\n      this.loadTransactions();\n    }\n  },\n  methods: {\n    loadTransactions: function loadTransactions() {\n      var _this = this;\n      return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return axios.get(\"https://laboratorio3-f36a.restdb.io/rest/transactions?q={\\\"user_id\\\": \\\"\".concat(_this.userId, \"\\\"}\"), {\n                headers: _this.headers\n              });\n            case 3:\n              response = _context.sent;\n              console.log('log:', response.data);\n              _this.transactions = response.data;\n              _context.next = 11;\n              break;\n            case 8:\n              _context.prev = 8;\n              _context.t0 = _context[\"catch\"](0);\n              console.error('Error al obtener las transacciones', _context.t0);\n            case 11:\n              _context.prev = 11;\n              _this.loading = false;\n              return _context.finish(11);\n            case 14:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, null, [[0, 8, 11, 14]]);\n      }))();\n    }\n  }\n};","map":{"version":3,"names":["axios","data","userId","localStorage","getItem","transactions","loading","headers","created","$router","push","name","loadTransactions","methods","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_callee$","_context","prev","next","get","concat","sent","console","log","t0","error","finish","stop"],"sources":["C:\\Users\\Usuario\\Documents\\tp_final\\src\\views\\HomeView.vue"],"sourcesContent":["<template>\n  <div class=\"home\">\n\n    <div v-if=\"loading\" class=\"loading-container\">\n      <p>Cargando..</p>\n    </div>\n\n    <div v-else>\n    <h1>Bienvenido a tu cartera de criptomonedas</h1>\n    <p>Has iniciado sesion como: {{ userId }}</p>\n\n    <div v-if=\"transactions.length === 0\">\n      <p>No tienes transacciones registradas. Comienza con hacer tu primer compra para luego ver tu historial aqui.</p>\n      <router-link to=\"/purchase\" class=\"btn\">Realizar compra</router-link>\n    </div>\n\n    <div v-else>\n      <h1>Tu historial de transacciones</h1>\n      <router-link to=\"/history\" class=\"btn\">Ver historial</router-link>\n      <router-link to=\"/purchase\" class=\"btn\">Realizar compra</router-link>\n      <router-link to=\"/sale\" class=\"btn\">Realizar venta</router-link>\n    </div>\n    </div>\n    </div>\n</template>\n\n<script>\nimport axios from 'axios'\nexport default {\n  data () {\n    return {\n      userId: localStorage.getItem('userId'),\n      transactions: [],\n      loading: true,\n      headers: {\n        'x-apikey': '60eb09146661365596af552f'\n      }\n    }\n  },\n\n  created () {\n    if (!this.userId) {\n      this.$router.push({ name: 'UserLogin' })\n    } else {\n      this.loadTransactions()\n    }\n  },\n\n  methods: {\n    async loadTransactions () {\n      try {\n        const response = await axios.get(`https://laboratorio3-f36a.restdb.io/rest/transactions?q={\"user_id\": \"${this.userId}\"}`, { headers: this.headers })\n        console.log('log:', response.data)\n        this.transactions = response.data\n      } catch (error) {\n        console.error('Error al obtener las transacciones', error)\n      } finally {\n        this.loading = false\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n  .home{\n    padding: 20px;\n    text-align: center;\n  }\n\n  .btn{\n    display: inline-block;\n    margin-top: 20px;\n    padding: 10px 20px;\n    background-color: #007bff;\n    color: white;\n    text-decoration: none;\n    border-radius: 5px;\n    margin-right:5px;\n  }\n</style>\n"],"mappings":";;;AA2BA,OAAOA,KAAI,MAAO,OAAM;AACxB,eAAe;EACbC,IAAG,WAAHA,IAAGA,CAAA,EAAK;IACN,OAAO;MACLC,MAAM,EAAEC,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAC;MACtCC,YAAY,EAAE,EAAE;MAChBC,OAAO,EAAE,IAAI;MACbC,OAAO,EAAE;QACP,UAAU,EAAE;MACd;IACF;EACF,CAAC;EAEDC,OAAM,WAANA,OAAMA,CAAA,EAAK;IACT,IAAI,CAAC,IAAI,CAACN,MAAM,EAAE;MAChB,IAAI,CAACO,OAAO,CAACC,IAAI,CAAC;QAAEC,IAAI,EAAE;MAAY,CAAC;IACzC,OAAO;MACL,IAAI,CAACC,gBAAgB,CAAC;IACxB;EACF,CAAC;EAEDC,OAAO,EAAE;IACDD,gBAAe,WAAfA,gBAAeA,CAAA,EAAK;MAAA,IAAAE,KAAA;MAAA,OAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,UAAAC,QAAA;QAAA,IAAAC,QAAA;QAAA,OAAAH,mBAAA,GAAAI,IAAA,UAAAC,SAAAC,QAAA;UAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;YAAA;cAAAF,QAAA,CAAAC,IAAA;cAAAD,QAAA,CAAAE,IAAA;cAAA,OAECxB,KAAK,CAACyB,GAAG,4EAAAC,MAAA,CAAyEZ,KAAI,CAACZ,MAAM,UAAM;gBAAEK,OAAO,EAAEO,KAAI,CAACP;cAAQ,CAAC;YAAA;cAA7IY,QAAO,GAAAG,QAAA,CAAAK,IAAA;cACbC,OAAO,CAACC,GAAG,CAAC,MAAM,EAAEV,QAAQ,CAAClB,IAAI;cACjCa,KAAI,CAACT,YAAW,GAAIc,QAAQ,CAAClB,IAAG;cAAAqB,QAAA,CAAAE,IAAA;cAAA;YAAA;cAAAF,QAAA,CAAAC,IAAA;cAAAD,QAAA,CAAAQ,EAAA,GAAAR,QAAA;cAEhCM,OAAO,CAACG,KAAK,CAAC,oCAAoC,EAAAT,QAAA,CAAAQ,EAAO;YAAA;cAAAR,QAAA,CAAAC,IAAA;cAEzDT,KAAI,CAACR,OAAM,GAAI,KAAI;cAAA,OAAAgB,QAAA,CAAAU,MAAA;YAAA;YAAA;cAAA,OAAAV,QAAA,CAAAW,IAAA;UAAA;QAAA,GAAAf,OAAA;MAAA;IAEvB;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}