{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelSelect as _vModelSelect, withDirectives as _withDirectives, vModelText as _vModelText, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, withModifiers as _withModifiers, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nvar _hoisted_1 = {\n  \"class\": \"crypto-sale\"\n};\nvar _hoisted_2 = {\n  \"class\": \"form-container\"\n};\nvar _hoisted_3 = {\n  \"class\": \"form-group\"\n};\nvar _hoisted_4 = {\n  \"class\": \"form-group\"\n};\nvar _hoisted_5 = {\n  \"class\": \"form-group\"\n};\nvar _hoisted_6 = {\n  \"class\": \"form-group\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  var _component_router_link = _resolveComponent(\"router-link\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[13] || (_cache[13] = _createElementVNode(\"h1\", null, \"Venta de criptomonedas\", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"form\", {\n    onSubmit: _cache[4] || (_cache[4] = _withModifiers(function () {\n      return $options.submitSale && $options.submitSale.apply($options, arguments);\n    }, [\"prevent\"]))\n  }, [_createElementVNode(\"div\", _hoisted_3, [_cache[6] || (_cache[6] = _createElementVNode(\"label\", {\n    \"for\": \"cryptoSelect\"\n  }, \"Seleccionar criptomoneda vendida\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"select\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = function ($event) {\n      return $data.selectedCrypto = $event;\n    })\n  }, _cache[5] || (_cache[5] = [_createElementVNode(\"option\", {\n    value: \"btn\"\n  }, \"Bitcoin\", -1 /* HOISTED */), _createElementVNode(\"option\", {\n    value: \"eth\"\n  }, \"Ethereum\", -1 /* HOISTED */), _createElementVNode(\"option\", {\n    value: \"usdc\"\n  }, \"USD Coin\", -1 /* HOISTED */), _createElementVNode(\"option\", {\n    value: \"sol\"\n  }, \"Solana\", -1 /* HOISTED */)]), 512 /* NEED_PATCH */), [[_vModelSelect, $data.selectedCrypto]])]), _createElementVNode(\"div\", _hoisted_4, [_cache[7] || (_cache[7] = _createElementVNode(\"label\", {\n    \"for\": \"amount\"\n  }, \"Cantidad vendida\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"number\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = function ($event) {\n      return $data.cryptoAmount = $event;\n    }),\n    step: \"any\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.cryptoAmount]])]), _createElementVNode(\"div\", _hoisted_5, [_cache[8] || (_cache[8] = _createElementVNode(\"label\", {\n    \"for\": \"money\"\n  }, \"Monto entrante\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"number\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = function ($event) {\n      return $data.money = $event;\n    }),\n    step: \"any\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.money]])]), _createElementVNode(\"div\", _hoisted_6, [_cache[9] || (_cache[9] = _createElementVNode(\"label\", {\n    \"for\": \"datetime\"\n  }, \"Fecha y hora\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"datetime-local\",\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = function ($event) {\n      return $data.datetime = $event;\n    }),\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.datetime]])]), _createVNode(_component_router_link, {\n    to: \"/home\",\n    \"class\": \"btn\"\n  }, {\n    \"default\": _withCtx(function () {\n      return _cache[10] || (_cache[10] = [_createTextVNode(\"Volver\")]);\n    }),\n    _: 1 /* STABLE */\n  }), _cache[12] || (_cache[12] = _createElementVNode(\"button\", {\n    type: \"submit\"\n  }, \"Registrar venta\", -1 /* HOISTED */)), _createVNode(_component_router_link, {\n    to: \"/history\",\n    \"class\": \"btn\"\n  }, {\n    \"default\": _withCtx(function () {\n      return _cache[11] || (_cache[11] = [_createTextVNode(\"Ver historial\")]);\n    }),\n    _: 1 /* STABLE */\n  })], 32 /* NEED_HYDRATION */)])]);\n}","map":{"version":3,"names":["_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","onSubmit","_cache","_withModifiers","$options","submitSale","apply","arguments","_hoisted_3","$event","$data","selectedCrypto","value","_hoisted_4","type","cryptoAmount","step","required","_hoisted_5","money","_hoisted_6","datetime","_createVNode","_component_router_link","to","_withCtx","_createTextVNode","_"],"sources":["C:\\Users\\Usuario\\Documents\\tp_final\\src\\views\\SalesView.vue"],"sourcesContent":["<template>\n    <div class=\"crypto-sale\">\n        <h1>Venta de criptomonedas</h1>\n        <div class=\"form-container\">\n        <form @submit.prevent=\"submitSale\">\n            <div class=\"form-group\">\n                <label for=\"cryptoSelect\">Seleccionar criptomoneda vendida</label>\n                <select v-model=\"selectedCrypto\">\n                <option value=\"btn\">Bitcoin</option>\n                <option value=\"eth\">Ethereum</option>\n                <option value=\"usdc\">USD Coin</option>\n                <option value=\"sol\">Solana</option>\n                </select>\n            </div>\n\n            <div class=\"form-group\">\n                <label for=\"amount\">Cantidad vendida</label>\n                <input type=\"number\" v-model=\"cryptoAmount\" step=\"any\" required />\n            </div>\n\n            <div class=\"form-group\">\n                <label for=\"money\">Monto entrante</label>\n                <input type=\"number\" v-model=\"money\" step=\"any\" required />\n            </div>\n\n            <div class=\"form-group\">\n                <label for=\"datetime\">Fecha y hora</label>\n                <input type=\"datetime-local\" v-model=\"datetime\" required />\n            </div>\n\n            <router-link to=\"/home\" class=\"btn\">Volver</router-link>\n            <button type=\"submit\">Registrar venta</button>\n            <router-link to=\"/history\" class=\"btn\">Ver historial</router-link>\n        </form>\n        </div>\n    </div>\n</template>\n\n<script>\nimport axios from 'axios'\n\nexport default {\n  data () {\n    return {\n      selectedCrypto: '',\n      cryptoAmount: 0,\n      money: '',\n      datetime: '',\n      cryptoPrice: 0,\n      userId: localStorage.getItem('userId'),\n      headers: {\n        'x-apikey': '60eb09146661365596af552f'\n      }\n    }\n  },\n  watch: {\n    selectedCrypto (newVal) {\n      if (newVal) {\n        this.getCryptoPrice(newVal)\n      }\n    },\n    cryptoAmount (newVal) {\n      if (newVal && this.cryptoPrice > 0) {\n        this.money = (newVal * this.cryptoPrice).toFixed(2)\n      }\n    }\n  },\n  methods: {\n    async getCryptoPrice (cryptoCode) {\n      try {\n        const response = await axios.get(`https://criptoya.com/api/letsbit/${cryptoCode}/ARS/0.1`)\n        this.cryptoPrice = response.data.totalAsk || 0\n      } catch (error) {\n        console.error('Hubo un error', error)\n      }\n    },\n\n    async submitSale () {\n      if (!this.selectedCrypto || !this.cryptoAmount || !this.money || !this.datetime) {\n        alert('Porfavor completa los datos de los campos')\n        return\n      }\n      const saleData = {\n        user_id: this.userId,\n        action: 'sale',\n        crypto_code: this.selectedCrypto,\n        crypto_amount: parseFloat(this.cryptoAmount),\n        money: this.money,\n        datetime: this.datetime\n      }\n      try {\n        await axios.post(\n          'https://laboratorio3-f36a.restdb.io/rest/transactions', saleData, { headers: this.headers }\n        )\n        alert('Venta registrada exitosamente')\n        this.selectedCrypto = ''\n        this.amount = ''\n        this.money = ''\n        this.datetime = ''\n      } catch (error) {\n        console.error('La venta no se ha registrado', error.response ? error.response.data : error.message)\n        alert('Hubo un error al registrar la venta')\n      }\n    }\n  }\n}\n</script>\n\n<style>\n  .sale {\n    padding: 20px;\n  }\n\n  .form-container{\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 100%;\n  }\n\n  h1{\n    color: #333;\n    font-size: 30px;\n    margin-bottom: 50px;\n  }\n\n  input, select{\n    width: 100%;\n    padding: 10px;\n    border: 1px solid #333;\n    border-radius: 5px;\n    font-size: 18px;\n    margin-right: 10px;\n  }\n\n  .form-group{\n    margin-bottom: 20px;\n  }\n\n  button{\n    background-color: #007bff;\n    color: white;\n    border: none;\n    border-radius: 5px;\n    padding: 10px 20px;\n    transition: background-color 0.5s;\n    font-size: 16px;\n  }\n  .btn{\n    display: inline-block;\n    margin-top: 20px;\n    padding: 10px 20px;\n    background-color: #007bff;\n    color: white;\n    text-decoration: none;\n    border-radius: 5px;\n    margin-right: 5px;\n    margin-left: 5px;\n  }\n</style>\n"],"mappings":";;EACS,SAAM;AAAa;;EAEf,SAAM;AAAgB;;EAElB,SAAM;AAAY;;EAUlB,SAAM;AAAY;;EAKlB,SAAM;AAAY;;EAKlB,SAAM;AAAY;;;uBAxB/BA,mBAAA,CAkCM,OAlCNC,UAkCM,G,4BAjCFC,mBAAA,CAA+B,YAA3B,wBAAsB,sBAC1BA,mBAAA,CA+BM,OA/BNC,UA+BM,GA9BND,mBAAA,CA6BO;IA7BAE,QAAM,EAAAC,MAAA,QAAAA,MAAA,MAJrBC,cAAA;MAAA,OAI+BC,QAAA,CAAAC,UAAA,IAAAD,QAAA,CAAAC,UAAA,CAAAC,KAAA,CAAAF,QAAA,EAAAG,SAAA,CAAU;IAAA;MAC7BR,mBAAA,CAQM,OARNS,UAQM,G,0BAPFT,mBAAA,CAAkE;IAA3D,OAAI;EAAc,GAAC,kCAAgC,sB,gBAC1DA,mBAAA,CAKS;IAZzB,uBAAAG,MAAA,QAAAA,MAAA,gBAAAO,MAAA;MAAA,OAOiCC,KAAA,CAAAC,cAAc,GAAAF,MAAA;IAAA;gCAC/BV,mBAAA,CAAoC;IAA5Ba,KAAK,EAAC;EAAK,GAAC,SAAO,qBAC3Bb,mBAAA,CAAqC;IAA7Ba,KAAK,EAAC;EAAK,GAAC,UAAQ,qBAC5Bb,mBAAA,CAAsC;IAA9Ba,KAAK,EAAC;EAAM,GAAC,UAAQ,qBAC7Bb,mBAAA,CAAmC;IAA3Ba,KAAK,EAAC;EAAK,GAAC,QAAM,oB,2CAJTF,KAAA,CAAAC,cAAc,E,KAQnCZ,mBAAA,CAGM,OAHNc,UAGM,G,0BAFFd,mBAAA,CAA4C;IAArC,OAAI;EAAQ,GAAC,kBAAgB,sB,gBACpCA,mBAAA,CAAkE;IAA3De,IAAI,EAAC,QAAQ;IAjBpC,uBAAAZ,MAAA,QAAAA,MAAA,gBAAAO,MAAA;MAAA,OAiB8CC,KAAA,CAAAK,YAAY,GAAAN,MAAA;IAAA;IAAEO,IAAI,EAAC,KAAK;IAACC,QAAQ,EAAR;iDAAzBP,KAAA,CAAAK,YAAY,E,KAG9ChB,mBAAA,CAGM,OAHNmB,UAGM,G,0BAFFnB,mBAAA,CAAyC;IAAlC,OAAI;EAAO,GAAC,gBAAc,sB,gBACjCA,mBAAA,CAA2D;IAApDe,IAAI,EAAC,QAAQ;IAtBpC,uBAAAZ,MAAA,QAAAA,MAAA,gBAAAO,MAAA;MAAA,OAsB8CC,KAAA,CAAAS,KAAK,GAAAV,MAAA;IAAA;IAAEO,IAAI,EAAC,KAAK;IAACC,QAAQ,EAAR;iDAAlBP,KAAA,CAAAS,KAAK,E,KAGvCpB,mBAAA,CAGM,OAHNqB,UAGM,G,0BAFFrB,mBAAA,CAA0C;IAAnC,OAAI;EAAU,GAAC,cAAY,sB,gBAClCA,mBAAA,CAA2D;IAApDe,IAAI,EAAC,gBAAgB;IA3B5C,uBAAAZ,MAAA,QAAAA,MAAA,gBAAAO,MAAA;MAAA,OA2BsDC,KAAA,CAAAW,QAAQ,GAAAZ,MAAA;IAAA;IAAEQ,QAAQ,EAAR;iDAAVP,KAAA,CAAAW,QAAQ,E,KAGlDC,YAAA,CAAwDC,sBAAA;IAA3CC,EAAE,EAAC,OAAO;IAAC,SAAM;;IA9B1C,WAAAC,QAAA,CA8BgD;MAAA,OAAMvB,MAAA,SAAAA,MAAA,QA9BtDwB,gBAAA,CA8BgD,QAAM,E;;IA9BtDC,CAAA;kCA+BY5B,mBAAA,CAA8C;IAAtCe,IAAI,EAAC;EAAQ,GAAC,iBAAe,sBACrCQ,YAAA,CAAkEC,sBAAA;IAArDC,EAAE,EAAC,UAAU;IAAC,SAAM;;IAhC7C,WAAAC,QAAA,CAgCmD;MAAA,OAAavB,MAAA,SAAAA,MAAA,QAhChEwB,gBAAA,CAgCmD,eAAa,E;;IAhChEC,CAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}