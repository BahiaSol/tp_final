{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/Usuario/Documents/tp_final/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/Usuario/Documents/tp_final/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.number.to-fixed.js\";\nimport \"core-js/modules/es.parse-float.js\";\nimport axios from 'axios';\nexport default {\n  data: function data() {\n    return {\n      selectedCrypto: '',\n      cryptoAmount: 0,\n      money: '',\n      datetime: '',\n      cryptoPrice: 0,\n      userId: localStorage.getItem('userId'),\n      headers: {\n        'x-apikey': '60eb09146661365596af552f'\n      }\n    };\n  },\n  watch: {\n    selectedCrypto: function selectedCrypto(newVal) {\n      if (newVal) {\n        this.getCryptoPrice(newVal);\n      }\n    },\n    cryptoAmount: function cryptoAmount(newVal) {\n      if (newVal && this.cryptoPrice > 0) {\n        this.money = (newVal * this.cryptoPrice).toFixed(2);\n      }\n    }\n  },\n  methods: {\n    getCryptoPrice: function getCryptoPrice(cryptoCode) {\n      var _this = this;\n      return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return axios.get(\"https://criptoya.com/api/letsbit/\".concat(cryptoCode, \"/ARS/0.1\"));\n            case 3:\n              response = _context.sent;\n              _this.cryptoPrice = response.data.totalAsk || 0;\n              _context.next = 10;\n              break;\n            case 7:\n              _context.prev = 7;\n              _context.t0 = _context[\"catch\"](0);\n              console.error('Hubo un error', _context.t0);\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, null, [[0, 7]]);\n      }))();\n    },\n    submitSale: function submitSale() {\n      var _this2 = this;\n      return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var saleData;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              if (!(!_this2.selectedCrypto || !_this2.cryptoAmount || !_this2.money || !_this2.datetime)) {\n                _context2.next = 3;\n                break;\n              }\n              alert('Porfavor completa los datos de los campos');\n              return _context2.abrupt(\"return\");\n            case 3:\n              saleData = {\n                user_id: _this2.userId,\n                action: 'sale',\n                crypto_code: _this2.selectedCrypto,\n                crypto_amount: parseFloat(_this2.cryptoAmount),\n                money: _this2.money,\n                datetime: _this2.datetime\n              };\n              _context2.prev = 4;\n              _context2.next = 7;\n              return axios.post('https://laboratorio3-f36a.restdb.io/rest/transactions', saleData, {\n                headers: _this2.headers\n              });\n            case 7:\n              alert('Venta registrada exitosamente');\n              _this2.selectedCrypto = '';\n              _this2.amount = '';\n              _this2.money = '';\n              _this2.datetime = '';\n              _context2.next = 18;\n              break;\n            case 14:\n              _context2.prev = 14;\n              _context2.t0 = _context2[\"catch\"](4);\n              console.error('La venta no se ha registrado', _context2.t0.response ? _context2.t0.response.data : _context2.t0.message);\n              alert('Hubo un error al registrar la venta');\n            case 18:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, null, [[4, 14]]);\n      }))();\n    }\n  }\n};","map":{"version":3,"names":["axios","data","selectedCrypto","cryptoAmount","money","datetime","cryptoPrice","userId","localStorage","getItem","headers","watch","newVal","getCryptoPrice","toFixed","methods","cryptoCode","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_callee$","_context","prev","next","get","concat","sent","totalAsk","t0","console","error","stop","submitSale","_this2","_callee2","saleData","_callee2$","_context2","alert","abrupt","user_id","action","crypto_code","crypto_amount","parseFloat","post","amount","message"],"sources":["C:\\Users\\Usuario\\Documents\\tp_final\\src\\views\\SalesView.vue"],"sourcesContent":["<template>\n    <div class=\"crypto-sale\">\n        <h1>Venta de criptomonedas</h1>\n        <div class=\"form-container\">\n        <form @submit.prevent=\"submitSale\">\n            <div class=\"form-group\">\n                <label for=\"cryptoSelect\">Seleccionar criptomoneda vendida</label>\n                <select v-model=\"selectedCrypto\">\n                <option value=\"btn\">Bitcoin</option>\n                <option value=\"eth\">Ethereum</option>\n                <option value=\"usdc\">USD Coin</option>\n                <option value=\"sol\">Solana</option>\n                </select>\n            </div>\n\n            <div class=\"form-group\">\n                <label for=\"amount\">Cantidad vendida</label>\n                <input type=\"number\" v-model=\"cryptoAmount\" step=\"any\" required />\n            </div>\n\n            <div class=\"form-group\">\n                <label for=\"money\">Monto entrante</label>\n                <input type=\"number\" v-model=\"money\" step=\"any\" required />\n            </div>\n\n            <div class=\"form-group\">\n                <label for=\"datetime\">Fecha y hora</label>\n                <input type=\"datetime-local\" v-model=\"datetime\" required />\n            </div>\n\n            <router-link to=\"/home\" class=\"btn\">Volver</router-link>\n            <button type=\"submit\">Registrar venta</button>\n            <router-link to=\"/history\" class=\"btn\">Ver historial</router-link>\n        </form>\n        </div>\n    </div>\n</template>\n\n<script>\nimport axios from 'axios'\n\nexport default {\n  data () {\n    return {\n      selectedCrypto: '',\n      cryptoAmount: 0,\n      money: '',\n      datetime: '',\n      cryptoPrice: 0,\n      userId: localStorage.getItem('userId'),\n      headers: {\n        'x-apikey': '60eb09146661365596af552f'\n      }\n    }\n  },\n  watch: {\n    selectedCrypto (newVal) {\n      if (newVal) {\n        this.getCryptoPrice(newVal)\n      }\n    },\n    cryptoAmount (newVal) {\n      if (newVal && this.cryptoPrice > 0) {\n        this.money = (newVal * this.cryptoPrice).toFixed(2)\n      }\n    }\n  },\n  methods: {\n    async getCryptoPrice (cryptoCode) {\n      try {\n        const response = await axios.get(`https://criptoya.com/api/letsbit/${cryptoCode}/ARS/0.1`)\n        this.cryptoPrice = response.data.totalAsk || 0\n      } catch (error) {\n        console.error('Hubo un error', error)\n      }\n    },\n\n    async submitSale () {\n      if (!this.selectedCrypto || !this.cryptoAmount || !this.money || !this.datetime) {\n        alert('Porfavor completa los datos de los campos')\n        return\n      }\n      const saleData = {\n        user_id: this.userId,\n        action: 'sale',\n        crypto_code: this.selectedCrypto,\n        crypto_amount: parseFloat(this.cryptoAmount),\n        money: this.money,\n        datetime: this.datetime\n      }\n      try {\n        await axios.post(\n          'https://laboratorio3-f36a.restdb.io/rest/transactions', saleData, { headers: this.headers }\n        )\n        alert('Venta registrada exitosamente')\n        this.selectedCrypto = ''\n        this.amount = ''\n        this.money = ''\n        this.datetime = ''\n      } catch (error) {\n        console.error('La venta no se ha registrado', error.response ? error.response.data : error.message)\n        alert('Hubo un error al registrar la venta')\n      }\n    }\n  }\n}\n</script>\n\n<style>\n  .sale {\n    padding: 20px;\n  }\n\n  .form-container{\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 100%;\n  }\n\n  h1{\n    color: #333;\n    font-size: 30px;\n    margin-bottom: 50px;\n  }\n\n  input, select{\n    width: 100%;\n    padding: 10px;\n    border: 1px solid #333;\n    border-radius: 5px;\n    font-size: 18px;\n    margin-right: 10px;\n  }\n\n  .form-group{\n    margin-bottom: 20px;\n  }\n\n  button{\n    background-color: #007bff;\n    color: white;\n    border: none;\n    border-radius: 5px;\n    padding: 10px 20px;\n    transition: background-color 0.5s;\n    font-size: 16px;\n  }\n  .btn{\n    display: inline-block;\n    margin-top: 20px;\n    padding: 10px 20px;\n    background-color: #007bff;\n    color: white;\n    text-decoration: none;\n    border-radius: 5px;\n    margin-right: 5px;\n    margin-left: 5px;\n  }\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}